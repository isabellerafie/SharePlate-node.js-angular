<!-- <p>feedbacks works! {{role}}</p>{{account_id}} -->
<!-- <div class="add-complaint" *ngIf="userLogin.role==2 || userLogin.role==3"> -->

<!-- <h2>Add Complaint</h2>
     <form>
    <form [formGroup]="complaintForm" (ngSubmit)="onSubmit()"> 
      <div class="form-group">
        <label for="userId">User:</label>
        <select class="form-control" formControlName="userId" id="userId">
          <option *ngFor="let user of users" [ngValue]="user.user_ame"> -->
<!-- {{ user.name }} -->
<!-- </option>
        </select>
      </div>
    
      <div class="form-group">
        <label for="message">Message:</label>
        <textarea class="form-control" formControlName="message" id="message" rows="5"></textarea>
      </div>
    
      <button type="submit" class="btn btn-primary">Submit</button>
    </form> -->
<!-- <div *ngIf="this.role === 2 || this.role === 3">
  <div class="feedbacks-complaints">
    <div class="add-complaint">
      <h2>Add Complaint</h2>
      <p style="font-size: small; text-align: center;color: gray;margin-top: -3%;">If you have faced any problem</p>
      <form #complaintForm="ngForm" (ngSubmit)="submitComplaint(account_id)">
        <div class="form-group">
          <label for="receiver-name">Complaint about:</label>
          <select *ngIf="this.role===3" id="receiver-name" name="receiver_name" required #complaintInput="ngModel"
            [(ngModel)]="complaintData.reciever_name">

            <option *ngFor="let restaurant of restaurantNames" [value]="restaurant">{{restaurant}}</option>

          </select>
          <select *ngIf="this.role===2" id="receiver-name" name="receiver_name" required #complaintInput="ngModel"
            [(ngModel)]="complaintData.reciever_name">

            <option *ngFor="let organization of organizationNames" [value]="organization">{{organization}}</option>

          </select>
          <div *ngIf="complaintInput.invalid && (complaintInput.dirty || complaintInput.touched)" class="error-message">
            <div *ngIf="complaintInput.errors?.['required']" style="color:rgba(160, 4, 4)">You sould select an option.
            </div>
          </div>
          </div>
          <div class="form-group">
            <label for="message">Complaint Message:</label>
            <textarea id="message" name="message" required #messageInput="ngModel" [(ngModel)]="complaintData.message"
              rows="5"></textarea>
            <div *ngIf="messageInput.invalid && (messageInput.dirty || messageInput.touched )" class="error-message">
              <div *ngIf="messageInput.errors?.['required']" style="color:rgba(160, 4, 4)">Complaint message is
                required.</div>
            </div>
          </div>
          <div class="form-group">
            <button type="submit">Submit </button>
          </div>
        </div>
      </form> -->
<div *ngIf="this.role === 2 || this.role === 3">
  <div class="feedbacks-complaints">
    <div class="add-complaint">
      <h2>Add Complaint</h2>
      <p style="font-size: small; text-align: center; color: gray; margin-top: -3%;">If you have faced any problem</p>
      <form #complaintForm="ngForm" (ngSubmit)="submitComplaint(account_id)">
        <div class="form-group">
          <label for="receiver-name">Complaint about:</label>

          <!-- Single Select Element with Conditional Options -->
          <select id="receiver-name" name="receiver_name" required #complaintInput="ngModel"
            [(ngModel)]="complaintData.reciever_name">
            <ng-container *ngIf="this.role === 3">
              <option *ngFor="let restaurant of restaurantNames" [value]="restaurant">{{ restaurant }}</option>
            </ng-container>
            <ng-container *ngIf="this.role === 2">
              <option *ngFor="let organization of organizationNames" [value]="organization">{{ organization }}</option>
            </ng-container>
          </select>

          <div *ngIf="complaintInput.invalid && (complaintInput.dirty || complaintInput.touched)" class="error-message">
            <div *ngIf="complaintInput.errors?.['required']" style="color:rgba(160, 4, 4)">You should select an option.
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="message">Complaint Message:</label>
          <textarea id="message" name="message" required #messageInput="ngModel" [(ngModel)]="complaintData.message"
            rows="5"></textarea>
          <div *ngIf="messageInput.invalid && (messageInput.dirty || messageInput.touched )" class="error-message">
            <div *ngIf="messageInput.errors?.['required']" style="color:rgba(160, 4, 4)">Complaint message is required.
            </div>
          </div>
        </div>

        <div class="form-group">
          <button type="submit">Submit</button>
        </div>
      </form>
    </div>
    <!-- </div> -->
    <!-- </div> -->
    <!-- </div> -->


    <div class="add-feedback">
      <h2>Add Feedback</h2>
      <p style="font-size: small; text-align: center;color: gray;margin-top: -3%;">leave your feedback about the website
        here</p>
      <form (ngSubmit)="submitFeedback(account_id)">
        <div class="form-group">
          <label for="message">Feedback Message:</label>
          <textarea id="feedback" name="feedback" required #feedbackInput="ngModel" [(ngModel)]="feedbackData.message"
            rows="5"></textarea>
          <div *ngIf="feedbackInput.invalid && (feedbackInput.dirty || feedbackInput.touched)" class="error-message">
            <div *ngIf="feedbackInput.errors?.['required']" style="color:rgba(160, 4, 4)">Feedback message is required.
            </div>
          </div>
        </div>
        <div class="form-group">
          <label>Rate us:</label>
          <div class="rating-container" id="rating" style="margin-bottom: 7%;">
            <!-- <input type="hidden" name="rating" id="ratingValue" [(ngModel)]="rating"> -->
            <i *ngFor="let star of stars" class="star bi"
              [ngClass]="{'bi-star-fill': star <= currentrating, 'bi-star': star > currentrating}"
              (mouseenter)="highlightStars(star)" (mouseleave)="unhighlightStars()" (click)="rate(star)"
              [attr.data-value]="star">
            </i>
          </div>
          <button type="submit">Submit </button>
        </div>
      </form>
    </div>
  </div>
</div>
<!-- </div> -->


<!-- </div> -->
<div class="get-all-feedbacks">

  <div class="feedbacks/complaints">
    <h1>Feedbacks</h1>
    <div class="block" *ngFor="let feedback of allFeedbacks">
      <div>

      <div class="user-info">
        <span class="user-name">{{feedback.sender_name}}</span>
      </div>

      <div class="feedback-message">
        <p>{{feedback.message}}</p>
      </div>
      </div>
      <div style="margin-top: auto;margin-bottom: auto;">

      <div class="star-rating">
        <i *ngFor="let star of stars" [ngClass]="{'bi-star-fill': star<feedback.rating}"></i>
      </div>
    </div>
      <!-- <div *ngIf="this.role===1" class="left"> -->
      <!-- <button style="background-color:rgba(160, 4, 4);color: white;"  (click)="deleteFeedback(feedback.)">Delete</button> -->
      <!-- </div> -->
    </div>
  </div>

</div>

<div *ngIf="this.role === 1">
  <div class="get-all-complaints">

    <div class="feedbacks/complaints">
      <h1 style="background-color:  rgba(160, 4, 4)">Complaints</h1>
      <div class="block" *ngFor="let complaint of allComplaints">
        <div>

          <div class="user-info">
            <span class="user-name">{{complaint.sender_name}}</span>
          </div>

          <div class="message">
            <p>{{complaint.message}}</p>
          </div>
          <div class="complaint-on">
            <p><span style="color: rgba(160, 4, 4);">Complaint About :</span>{{complaint.receiver_name}}</p>
          </div>
        </div>
        <div style="margin-top: auto;margin-bottom: auto;">
          <button  (click)="sendWarningMail(complaint.complaint_id)" style="background-color: #fdba07; color: white;border: none;height:30px;border-radius: 10px;">Send Warning</button>
        </div>
      </div>
    </div>


  </div>
</div>


<!-- <i *ngFor="let star of stars" [ngClass]="{'bi-star-fill': star <= feedbackData.rating}" ></i> -->
<!-- <div>
  <div *ngFor="let feedback of allFeedbacks">
 {{feedback.message}} </div>
</div> -->








<!-- <div class="complaints" *ngIf="userLogin.role==1">
    marhbaaaaa
</div> -->